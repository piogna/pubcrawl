<div class="jumbotron">
    <div class="row">
      <div id="map" class="col-lg-12"></div>
  </div>
</div>

<div class="container">

<div class="row">
  <h1><%= @crawl.name %></h1>
  <hr/>
  <div id="crawl-bars">
    <% @bars.each do |bar| %>
      <h3><%= bar.name %></h3>
      <p><%= bar.address %></p>
      <p><%= bar.city %></p>
  </div>
  <hr/>
  <% end %>
</div>

<script type="text/javascript">
  var map;

  function initMap(coords) {
  var mapDiv = document.getElementById('map');
    map = new google.maps.Map(mapDiv, {
        center: {
            lat: 43.656288,
            lng: -79.380905
        },
        zoom: 14
    });
    centerMap()
  }

  function centerMap() {
    var geolocation = null;

    if (window.navigator && window.navigator.geolocation) {
        geolocation = window.navigator.geolocation;
    }

    if (geolocation) {

        geolocation.getCurrentPosition(
            function(position) {
                latLng = new google.maps.LatLng({
                    lat: position.coords.latitude,
                    lng: position.coords.longitude
                });
                map.panTo(latLng);
            }
        );
    }
  }
</script>
<script src="https://maps.googleapis.com/maps/api/js?callback=initMap" async defer></script>
</div>
